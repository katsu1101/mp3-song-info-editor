(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80389,e=>{"use strict";var t=e.i(80506);let r={ui:{showFilePath:!1},playback:{continuous:!1,shuffle:!1}},l="mp3-editor.settings.v1";var i=e.i(778);let u=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),s=e=>{if(0===e.length)return!1;let t=Number(e);return Number.isInteger(t)&&String(t)===e},a=e=>Array.isArray(e)?[...e]:u(e)?{...e}:{},n=(e,t)=>Array.isArray(e)&&s(t)?e[Number(t)]:Array.isArray(e)?void 0:e[t],o=(e,t,r)=>{if(Array.isArray(e)&&s(t)){e[Number(t)]=r;return}Array.isArray(e)||(e[t]=r)},c=(e,t,r)=>{let l=t.split(".").filter(Boolean);if(0===l.length)return e;let i=Array.isArray(e)?[...e]:u(e)?{...e}:null;if(!i)return e;let s=i;for(let e=0;e<l.length-1;e++){let t=l[e],r=a(n(s,t));o(s,t,r),s=r}return o(s,l[l.length-1],r),i},g=(e,t)=>{switch(t.type){case"replace":return t.settings;case"set":return c(e,t.path,t.value);case"toggle":{let r=((e,t)=>{let r=t.split(".").filter(Boolean),l=e;for(let e of r){if(!u(l))return;l=l[e]}return l})(e,t.path);if("boolean"!=typeof r)return e;return c(e,t.path,!r)}default:return e}},h=(0,i.createContext)(null);e.s(["SettingsProvider",0,({children:e})=>{let[u,s]=(0,i.useReducer)(g,r),a=(0,i.useRef)(!1);(0,i.useEffect)(()=>{s({type:"replace",settings:(()=>{try{let e=localStorage.getItem(l);if(!e)return r;let t=JSON.parse(e);return{ui:{showFilePath:t.ui?.showFilePath??r.ui.showFilePath},playback:{continuous:t.playback?.continuous??r.playback.continuous,shuffle:t.playback?.shuffle??r.playback.shuffle}}}catch{return r}})()}),a.current=!0},[]),(0,i.useEffect)(()=>{if(a.current)try{localStorage.setItem(l,JSON.stringify(u))}catch{}},[u]);let n=(0,i.useMemo)(()=>({settings:u,setSetting:(e,t)=>s({type:"set",path:e,value:t}),toggleSetting:e=>s({type:"toggle",path:e}),toggleContinuous:()=>s({type:"toggle",path:"playback.continuous"}),toggleShuffle:()=>s({type:"toggle",path:"playback.shuffle"}),toggleShowFilePath:()=>s({type:"toggle",path:"ui.showFilePath"})}),[u]);return(0,t.jsx)(h.Provider,{value:n,children:e})},"useSettings",0,()=>{let e=(0,i.useContext)(h);if(!e)throw Error("useSettings must be used within SettingsProvider");return e}],80389)},44636,e=>{"use strict";var t=e.i(80506),r=e.i(80389);function l({children:e}){return(0,t.jsx)(r.SettingsProvider,{children:e})}e.s(["Providers",()=>l])}]);